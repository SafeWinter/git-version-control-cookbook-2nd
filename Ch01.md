# 第一章 浏览 Git

相关主题：

- Git 对象模型
- Git 的三个阶段（stages）
- 查看有序无环图 (DAG)
- 提炼已修复事项
- 获取变动文件列表
- 使用 `gitk` 查看提交历史
- 在历史记录中查找提交版本
- 在历史代码中搜索信息



## 1.1 简介

传统版本管理系统：记录初始文件，以及后续变更。

![Conventional VCSs](./assets/c1-1.png)



Git：记录所有文件的快照。

![Git solution](assets/c1-2.png)



Git 数据模型

![Git data model](assets/c1-3.png)



`commit` 对象指向 **根节点树** `root tree`，根节点树又指向各子树（`subtrees`）与文件（`files`）

分支和标签指向 `commit` 对象，而 `HEAD` 对象指向当前签出的分支 `branch`。因此对于每一个版本，其指向的根节点树 **都是相同的**。



## 1.2 Git 对象

Git 对象是按键值对的形式存储。这个 **键**，用的是该对象的 SHA-1 哈希值，外加一些额外属性（如大小）。

Git 共有四种对象类型：

- 文件（在 Git 语境下也称 **二进制大对象** blob）
- 目录（在 Git 语境下也称 **树**）
- 版本
- 标签

而 `HEAD` 是一个特殊的指针，指向当前签出的 `branch` 分支。

查看并打印 `HEAD` 标签指向的 `commit` 对象：

```bash
git cat-file -p HEAD
```

由于 `HEAD` 指向 `master`（现在叫 `main`）分支，`master` 分支又指向最新一次提交版本 `commit`。



用同样的方式查看 `tree`：（SHA-1）

```bash
git cat-file -p 34fa038544bcd9aed660c08320214bafff94150b
```

或使用 `<rev>^<type>` 式引用：

```bash
git cat-file -p HEAD^{tree}
```

注：`<rev>^<type>` 返回从 `rev` 递归查找到的第一个 `type` 型对象。























