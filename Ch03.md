# 第三章 分支、合并及配置项

相关主题：

- 本地分支管理
- 远程分支
- 强制版本合并
- 使用 `git reuse recorded resolution` (`rerere`) 合并有冲突的 Git 版本
- 计算分支间的差异
- 孤立分支（`Orphan branches`）



## 2.1 本地分支管理

假如 git 库在本地，即便代码无需共享，本地分支也可以通过具备远程分支的仓库技巧进行管理。正如本例所示，需要先复制一个仓库到本地，意味着存在一个远程库。

```bash
# clone the jgit repository to match
$ git clone https://git.eclipse.org/r/jgit/jgit 
$ cd jgit 
# Whenever you start working on a bug fix or a new 
# feature in your project, you should create a branch
$ git branch newBugFix 
$ git branch 
* master 
 newBugFix
# The newBugFix branch points to the current HEAD
# to verify this:
$ git log -1 newBugFix --format=format:%H
25fe20b2dbb20cac8aa43c5ad64494ef8ea64ffc
# edit branch description
$ git branch --edit-description newBugFix
# Add description in a newly opened editor
Refactoring the Hydro controller 

The hydro controller code is currently horrible needs to be refactored.  
# Show the description
$ git config --get branch.newBugFix.description 
Refactoring the Hydro controller 

The hydro controller code is currently horrible and needs to be refactored.  
# Show the commit hash the new branch based on
$ cat .git/refs/heads/newBugFix 
25fe20b2dbb20cac8aa43c5ad64494ef8ea64ffc 
```

由此可见，该 `ID` 与当前 `HEAD` 的 `ID` 一致。

注意：新建分支后，要切换到该分支才能使用：`git checkout -b <newBranch>`



拓展：若不从 HEAD 新建分支，而是某个提交 ID（`979e346`），此时基于该版本的提交可以写作：

```bash
# new branch from commit ID
$ git branch anotherBugFix 979e346 
$ git log -1 anotherBugFix --format=format:%h 
979e346 
$ git log -1 anotherBugFix --format=format:%H 
979e3467112618cc787e161097986212eaaa4533 
# checkout new branch
$ git checkout -b lastBugFix 979e346
```



查看分支信息：

1. `git branch`：仅分支名称
2. `git branch -v`：在 1 的基础上带注释及简化 `SHA-1`
3. `git branch -vv`：在 2 的基础上展示远程跟踪分支名称

```bash
$ git branch -v 

  anotherBugFix 979e346 Interactive Rebase: Do actions if  
* lastBugFix    979e346 Interactive Rebase: Do actions if  
  master        25fe20b Add missing package import for jg 
  newBugFix     25fe20b Add missing package import for jg
$ git branch -vv 

  anotherBugFix 979e346 Interactive Rebase: Do actions if e 
* lastBugFix    979e346 Interactive Rebase: Do actions if e 
  master        25fe20b [origin/master] Add missing package  
  newBugFix     25fe20b Add missing package import for g 
```





## 2.2 远程分支



## 2.3 强制版本合并



## 2.4 使用 `rerere` 合并有冲突的 Git 版本



## 2.5 计算分之间的差异



## 2.6 孤立分支（`Orphan branches`）
